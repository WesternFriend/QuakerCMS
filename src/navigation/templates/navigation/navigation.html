{% load static %}

{% if menu_items %}
  <nav class="bg-black text-white shadow-md sticky top-0 z-50" aria-label="Main navigation">
    <div class="container mx-auto px-2">
      <div class="navbar w-full">
        <div class="navbar-start">
        {# Mobile dropdown menu #}
          <div class="dropdown">
            <div tabindex="0" role="button" class="btn btn-ghost lg:hidden" aria-label="Open menu">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
              </svg>
            </div>
            <ul tabindex="0" class="menu menu-sm dropdown-content bg-white text-black rounded-box z-[1] mt-3 w-52 p-2 shadow">
              {% for item in menu_items %}
                {% if item.type == 'page_link' or item.type == 'external_link' %}
                  <li>
                    <a
                      href="{{ item.url }}"
                      class="text-black hover:bg-gray-200{% if item.is_current %} active{% endif %}"
                    >
                      {{ item.title }}
                    </a>
                  </li>
                {% elif item.type == 'dropdown' %}
                  <li>
                    <a class="text-black">{{ item.title }}</a>
                    <ul class="p-2 bg-white">
                      {% for child in item.items %}
                        <li>
                          <a
                            href="{{ child.url }}"
                            class="text-black hover:bg-gray-200{% if child.is_current %} active{% endif %}"
                          >
                            {{ child.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </div>

        {# Desktop horizontal menu #}
          <ul class="menu menu-horizontal px-1 hidden lg:flex">
            {% for item in menu_items %}
              {% if item.type == 'page_link' or item.type == 'external_link' %}
                <li>
                  <a
                    href="{{ item.url }}"
                    {% if item.is_current %}class="active"{% endif %}
                  >
                    {{ item.title }}
                  </a>
                </li>
              {% elif item.type == 'dropdown' %}
                <li>
                  <details>
                    <summary>{{ item.title }}</summary>
                    <ul class="p-2 bg-white text-black rounded-box shadow z-[1]">
                      {% for child in item.items %}
                        <li>
                          <a
                            href="{{ child.url }}"
                            class="text-black hover:bg-gray-200{% if child.is_current %} active{% endif %}"
                          >
                            {{ child.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  </details>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>

      {# Right side - placeholder for future buttons/search #}
        <div class="navbar-end">
        </div>
      </div>
    </div>
  </nav>
{% endif %}
